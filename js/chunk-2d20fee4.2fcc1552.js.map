{"version":3,"sources":["webpack:///./src/views/Wareneingang.vue","webpack:///./src/components/Steps.vue","webpack:///./src/components/Steps.vue?bb40","webpack:///./src/views/Wareneingang.vue?6fc5","webpack:///./src/views/Wareneingang.vue?06bf"],"names":["class","role","xmlns","fill","viewBox","stroke","stroke-linecap","stroke-linejoin","stroke-width","d","id","for","steps","step","quagging","codeFound","name","productCode","placeholder","type","startScanning","stopScanning","disabled","nextStep","productName","productGram","productPrice","productAmount","productMhd","previousStep","missingValues","addProduct","newProduct","s","key","props","render","components","Steps","setup","Date","productFound","value","init","locate","frequency","numOfWorkers","locator","halfSample","patchSize","inputStream","target","document","getElementById","undefined","decoder","readers","err","console","error","start","stop","onProcessed","data","codeResult","code","onDetected","ADD_NEW_INVENTORY_ENTRY","post","body","product_code","product_name","amount","is_gram","price_tag","good_till","execute"],"mappings":"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","file":"js/chunk-2d20fee4.2fcc1552.js","sourcesContent":["<template>\r\n  <div class=\"flex flex-col space-y-4\">\r\n    <steps :steps=\"steps\" :step=\"step\"></steps>\r\n    <div class=\"flex flex-col space-y-8\" v-if=\"step == 1\">\r\n      <div\r\n        v-if=\"quagging && !codeFound\"\r\n        class=\"relative py-3 pl-4 pr-10 leading-normal text-yellow-700 bg-yellow-100 rounded-lg mt-5 text-base\"\r\n        role=\"alert\"\r\n      >\r\n        <p>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"h-6 w-6 animate-ping inline-flex rounded-full bg-green-500 opacity-90 mr-2\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n            /></svg\r\n          >Suche Barcode...\r\n        </p>\r\n      </div>\r\n      <div v-show=\"quagging\" class=\"\" id=\"code-scanner\">\r\n        <video class=\"w-60 mb-10\"></video>\r\n        <canvas class=\"drawingBuffer absolute left-0 top-0\"></canvas>\r\n      </div>\r\n      <div class=\"flex space-x-2\">\r\n        <div class=\"flex flex-col space-y-1\">\r\n          <label class=\"text-white text-sm\" for=\"productCode\">Produkt-Code</label>\r\n          <input\r\n            name=\"productCode\"\r\n            v-model=\"productCode\"\r\n            placeholder=\"Produkt-Code\"\r\n            class=\"rounded-3xl border border-gray-500 focus:outline-none focus:ring focus:ring-green-500 px-2 py-1\"\r\n            type=\"text\"\r\n          />\r\n        </div>\r\n        <button @click=\"startScanning()\" class=\"rounded bg-green-500 hover:bg-green-600 text-white py-2 px-3\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"object-contain w-8\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          v-if=\"quagging && !codeFound\"\r\n          @click=\"stopScanning()\"\r\n          class=\"rounded bg-red-400 hover:bg-red-600 text-white py-2 px-3\"\r\n        >\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            class=\"object-contain w-8\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div class=\"flex space-x-2 justify-end mt-20\">\r\n        <button\r\n          :disabled=\"productCode == ''\"\r\n          @click=\"nextStep()\"\r\n          class=\"rounded bg-green-500 hover:bg-green-600 py-2 px-3 disabled:opacity-50 text-white\"\r\n        >\r\n          Weiter\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex flex-col space-y-4\" v-if=\"step == 2\">\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label class=\"text-white text-sm\" for=\"productCode\">Produkt-Code</label>\r\n        <input\r\n          disabled\r\n          name=\"productCode\"\r\n          v-model=\"productCode\"\r\n          placeholder=\"Produkt-Code\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-50\r\n            text-white\r\n          \"\r\n          type=\"text\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label class=\"text-white text-sm\" for=\"productName\">Produktname</label>\r\n        <input\r\n          name=\"productName\"\r\n          v-model=\"productName\"\r\n          placeholder=\"Produktname\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-80\r\n          \"\r\n          type=\"text\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label class=\"text-white text-sm\" for=\"productGram\">Einheit in Gramm?</label>\r\n        <input\r\n          name=\"productGram\"\r\n          type=\"checkbox\"\r\n          v-model=\"productGram\"\r\n          placeholder=\"Produktname\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-80\r\n          \"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label v-if=\"productGram\" class=\"text-white text-sm\" for=\"productPrice\">Preis pro 100g</label>\r\n        <label v-else class=\"text-white text-sm\" for=\"productPrice\">Preis</label>\r\n        <input\r\n          name=\"productPrice\"\r\n          v-model=\"productPrice\"\r\n          :placeholder=\"productGram ? 'Preis pro 100g' : 'Preis'\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-80\r\n          \"\r\n          type=\"number\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label v-if=\"productGram\" class=\"text-white text-sm\" for=\"productAmount\">Menge in g</label>\r\n        <label v-else class=\"text-white text-sm\" for=\"productAmount\">Anzahl</label>\r\n        <input\r\n          name=\"productAmount\"\r\n          v-model=\"productAmount\"\r\n          :placeholder=\"productGram ? 'Menge in g' : 'Anzahl'\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-80\r\n          \"\r\n          type=\"number\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label class=\"text-white text-sm\" for=\"productMhd\">MHD</label>\r\n        <input\r\n          name=\"productMhd\"\r\n          v-model=\"productMhd\"\r\n          placeholder=\"MHD\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n            disabled:opacity-80\r\n          \"\r\n          type=\"date\"\r\n        />\r\n      </div>\r\n      <div class=\"flex space-x-2\">\r\n        <button @click=\"previousStep()\" class=\"rounded bg-gray-500 hover:bg-gray-600 py-2 px-3 text-white\">\r\n          Zurück\r\n        </button>\r\n        <button\r\n          :disabled=\"missingValues\"\r\n          @click=\"addProduct()\"\r\n          class=\"rounded bg-green-500 hover:bg-green-600 py-2 px-3 disabled:opacity-75 text-white\"\r\n        >\r\n          Hinzufügen\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex flex-col justify-center space-y-2\" v-if=\"step == steps + 1\">\r\n      <div class=\"text-white text-center\">Produkt(e) erfolgreich hinzugefügt!</div>\r\n      <button @click=\"newProduct()\" class=\"rounded bg-green-500 hover:bg-green-600 py-2 px-3 text-white\">\r\n        Neue(s) Produkt(e) hinzufügen\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, ref } from \"vue\";\r\nimport Steps from \"@/components/Steps.vue\";\r\nimport Quagga from \"@ericblade/quagga2\";\r\nimport { ApiRequest, API_URLS } from \"@/api/request.api\";\r\n\r\nexport default defineComponent({\r\n  name: \"Wareneingang\",\r\n  components: { Steps },\r\n  setup() {\r\n    const step = ref(1);\r\n    const steps = ref(2);\r\n    const productCode = ref(\"\");\r\n    const productName = ref(\"\");\r\n    const productGram = ref(false);\r\n    const productPrice = ref(0);\r\n    const productAmount = ref(0);\r\n    const productMhd = ref(new Date());\r\n    const codeFound = ref(false);\r\n    const productFound = ref(false);\r\n    const quagging = ref(false);\r\n\r\n    const missingValues = computed(() => {\r\n      return !productName.value || !productPrice.value || !productAmount.value || !productMhd.value;\r\n    });\r\n\r\n    const nextStep = () => {\r\n      step.value = step.value + 1;\r\n    };\r\n\r\n    const previousStep = () => {\r\n      step.value = step.value > 1 ? step.value - 1 : step.value;\r\n    };\r\n\r\n    const startScanning = () => {\r\n      quagging.value = true;\r\n      Quagga.init(\r\n        {\r\n          locate: true,\r\n          frequency: 5,\r\n          numOfWorkers: 2,\r\n          locator: { halfSample: true, patchSize: \"medium\" },\r\n          inputStream: {\r\n            name: \"Live\",\r\n            type: \"LiveStream\",\r\n            target: document.getElementById(\"code-scanner\") || undefined,\r\n          },\r\n          decoder: {\r\n            readers: [\"ean_reader\"],\r\n          },\r\n        },\r\n        function (err) {\r\n          if (err) {\r\n            console.error(err);\r\n            return;\r\n          }\r\n          Quagga.start();\r\n        }\r\n      );\r\n    };\r\n\r\n    const stopScanning = () => {\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    };\r\n\r\n    Quagga.onProcessed((data) => {\r\n      if (data && data.codeResult && data.codeResult.code) {\r\n        codeFound.value = true;\r\n      }\r\n    });\r\n\r\n    Quagga.onDetected((data) => {\r\n      productCode.value = data.codeResult.code ? data.codeResult.code : \"\";\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    });\r\n\r\n    const addProduct = async () => {\r\n      if (!productFound.value) {\r\n        try {\r\n          await new ApiRequest(API_URLS.ADD_NEW_INVENTORY_ENTRY)\r\n            .post()\r\n            .body({\r\n              product_code: productCode.value,\r\n              product_name: productName.value,\r\n              amount: productAmount.value,\r\n              is_gram: productGram.value,\r\n              price_tag: productPrice.value,\r\n              good_till: productMhd.value,\r\n            })\r\n            .execute();\r\n          step.value += 1;\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    const newProduct = () => {\r\n      step.value = 1;\r\n      productCode.value = \"\";\r\n      productName.value = \"\";\r\n      productAmount.value = 0;\r\n      productGram.value = false;\r\n      productPrice.value = 0;\r\n      productMhd.value = new Date();\r\n    };\r\n\r\n    return {\r\n      startScanning,\r\n      stopScanning,\r\n      productCode,\r\n      productName,\r\n      productGram,\r\n      productPrice,\r\n      productAmount,\r\n      productMhd,\r\n      quagging,\r\n      codeFound,\r\n      step,\r\n      steps,\r\n      nextStep,\r\n      previousStep,\r\n      missingValues,\r\n      addProduct,\r\n    };\r\n  },\r\n});\r\n</script>\r\n","<template>\r\n  <div class>\r\n    <div class=\"bg-gray-400 h-1\"></div>\r\n    <div class=\"flex\">\r\n      <div class=\"flex-1\" v-for=\"s in steps\" :key=\"s\">\r\n        <div\r\n          v-if=\"step >= s\"\r\n          class=\"bg-green-500 -mt-1 h-1\"\r\n          :class=\"{ 'w-1/2': step == s, 'w-full': step < s }\"\r\n        ></div>\r\n        <div\r\n          class=\"-mt-3 mx-auto rounded-full h-5 w-5\"\r\n          :class=\"{ 'bg-green-500': s <= step, 'bg-gray-400': step != s }\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"steps\", \"step\"]\r\n};\r\n</script>","import { render } from \"./Steps.vue?vue&type=template&id=6b8d76f4\"\nimport script from \"./Steps.vue?vue&type=script&lang=js\"\nexport * from \"./Steps.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","\r\nimport { computed, defineComponent, ref } from \"vue\";\r\nimport Steps from \"@/components/Steps.vue\";\r\nimport Quagga from \"@ericblade/quagga2\";\r\nimport { ApiRequest, API_URLS } from \"@/api/request.api\";\r\n\r\nexport default defineComponent({\r\n  name: \"Wareneingang\",\r\n  components: { Steps },\r\n  setup() {\r\n    const step = ref(1);\r\n    const steps = ref(2);\r\n    const productCode = ref(\"\");\r\n    const productName = ref(\"\");\r\n    const productGram = ref(false);\r\n    const productPrice = ref(0);\r\n    const productAmount = ref(0);\r\n    const productMhd = ref(new Date());\r\n    const codeFound = ref(false);\r\n    const productFound = ref(false);\r\n    const quagging = ref(false);\r\n\r\n    const missingValues = computed(() => {\r\n      return !productName.value || !productPrice.value || !productAmount.value || !productMhd.value;\r\n    });\r\n\r\n    const nextStep = () => {\r\n      step.value = step.value + 1;\r\n    };\r\n\r\n    const previousStep = () => {\r\n      step.value = step.value > 1 ? step.value - 1 : step.value;\r\n    };\r\n\r\n    const startScanning = () => {\r\n      quagging.value = true;\r\n      Quagga.init(\r\n        {\r\n          locate: true,\r\n          frequency: 5,\r\n          numOfWorkers: 2,\r\n          locator: { halfSample: true, patchSize: \"medium\" },\r\n          inputStream: {\r\n            name: \"Live\",\r\n            type: \"LiveStream\",\r\n            target: document.getElementById(\"code-scanner\") || undefined,\r\n          },\r\n          decoder: {\r\n            readers: [\"ean_reader\"],\r\n          },\r\n        },\r\n        function (err) {\r\n          if (err) {\r\n            console.error(err);\r\n            return;\r\n          }\r\n          Quagga.start();\r\n        }\r\n      );\r\n    };\r\n\r\n    const stopScanning = () => {\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    };\r\n\r\n    Quagga.onProcessed((data) => {\r\n      if (data && data.codeResult && data.codeResult.code) {\r\n        codeFound.value = true;\r\n      }\r\n    });\r\n\r\n    Quagga.onDetected((data) => {\r\n      productCode.value = data.codeResult.code ? data.codeResult.code : \"\";\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    });\r\n\r\n    const addProduct = async () => {\r\n      if (!productFound.value) {\r\n        try {\r\n          await new ApiRequest(API_URLS.ADD_NEW_INVENTORY_ENTRY)\r\n            .post()\r\n            .body({\r\n              product_code: productCode.value,\r\n              product_name: productName.value,\r\n              amount: productAmount.value,\r\n              is_gram: productGram.value,\r\n              price_tag: productPrice.value,\r\n              good_till: productMhd.value,\r\n            })\r\n            .execute();\r\n          step.value += 1;\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    const newProduct = () => {\r\n      step.value = 1;\r\n      productCode.value = \"\";\r\n      productName.value = \"\";\r\n      productAmount.value = 0;\r\n      productGram.value = false;\r\n      productPrice.value = 0;\r\n      productMhd.value = new Date();\r\n    };\r\n\r\n    return {\r\n      startScanning,\r\n      stopScanning,\r\n      productCode,\r\n      productName,\r\n      productGram,\r\n      productPrice,\r\n      productAmount,\r\n      productMhd,\r\n      quagging,\r\n      codeFound,\r\n      step,\r\n      steps,\r\n      nextStep,\r\n      previousStep,\r\n      missingValues,\r\n      addProduct,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./Wareneingang.vue?vue&type=template&id=4807da00\"\nimport script from \"./Wareneingang.vue?vue&type=script&lang=ts\"\nexport * from \"./Wareneingang.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}