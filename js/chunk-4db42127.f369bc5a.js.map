{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/views/Verkauf.vue","webpack:///./src/views/Verkauf.vue?74d6","webpack:///./src/views/Verkauf.vue?0b28","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["toInteger","requireObjectCoercible","module","exports","count","str","String","this","result","n","Infinity","RangeError","classof","value","TypeError","$","toAbsoluteIndex","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","length","actualStart","argumentsLength","arguments","class","role","xmlns","fill","viewBox","stroke","stroke-linecap","stroke-linejoin","stroke-width","d","id","for","fill-rule","clip-rule","sellingSuccess","cart","product","key","product_code","amount","product_name","sold_for","toFixed","sellMore","quagging","codeFound","productCode","debounceCode","name","placeholder","type","startScanning","stopScanning","itemInfo","loading","noItemFound","is_gram","amountToSell","discount","addProduct","disabled","index","removeProduct","selling","sellStuff","setup","timeoutRef","price_tag","old_amount","mwst","init","locate","frequency","numOfWorkers","locator","halfSample","patchSize","inputStream","document","getElementById","undefined","decoder","readers","err","Error","stop","onProcessed","data","codeResult","code","onDetected","e","clearTimeout","setTimeout","SEARCH_ITEM","get","execute","then","req","catch","finally","discountMultiplier","push","item_amount","forEach","newOldAmount","newAmount","mwstMultiplier","UPDATE_ITEM","patch","body","ADD_NEW_SOLD_ENTRY","post","sale_date","Date","sold_for_mwst","render","thisNumberValue","repeat","fails","nativeToFixed","floor","pow","x","acc","log","x2","multiply","c","c2","divide","dataToString","s","t","call","FORCED","fractionDigits","z","j","number","fractDigits","sign","slice","$map","map","callbackfn"],"mappings":"gHACA,IAAIA,EAAY,EAAQ,QACpBC,EAAyB,EAAQ,QAIrCC,EAAOC,QAAU,SAAgBC,GAC/B,IAAIC,EAAMC,OAAOL,EAAuBM,OACpCC,EAAS,GACTC,EAAIT,EAAUI,GAClB,GAAIK,EAAI,GAAKA,GAAKC,IAAU,MAAMC,WAAW,+BAC7C,KAAMF,EAAI,GAAIA,KAAO,KAAOJ,GAAOA,GAAc,EAAJI,IAAOD,GAAUH,GAC9D,OAAOG,I,uBCZT,IAAII,EAAU,EAAQ,QAItBV,EAAOC,QAAU,SAAUU,GACzB,GAAoB,iBAATA,GAAuC,UAAlBD,EAAQC,GACtC,MAAMC,UAAU,wBAElB,OAAQD,I,kCCPV,IAAIE,EAAI,EAAQ,QACZC,EAAkB,EAAQ,QAC1BhB,EAAY,EAAQ,QACpBiB,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAEnDE,EAAMC,KAAKD,IACXE,EAAMD,KAAKC,IACXC,EAAmB,iBACnBC,EAAkC,kCAKtCZ,EAAE,CAAEa,OAAQ,QAASC,OAAO,EAAMC,QAASR,GAAuB,CAChES,OAAQ,SAAgBC,EAAOC,GAC7B,IAIIC,EAAaC,EAAmBC,EAAGC,EAAGC,EAAMC,EAJ5CC,EAAItB,EAASX,MACbkC,EAAMxB,EAASuB,EAAEE,QACjBC,EAAc3B,EAAgBgB,EAAOS,GACrCG,EAAkBC,UAAUH,OAWhC,GATwB,IAApBE,EACFV,EAAcC,EAAoB,EACL,IAApBS,GACTV,EAAc,EACdC,EAAoBM,EAAME,IAE1BT,EAAcU,EAAkB,EAChCT,EAAoBV,EAAIF,EAAIvB,EAAUiC,GAAc,GAAIQ,EAAME,IAE5DF,EAAMP,EAAcC,EAAoBT,EAC1C,MAAMZ,UAAUa,GAGlB,IADAS,EAAIjB,EAAmBqB,EAAGL,GACrBE,EAAI,EAAGA,EAAIF,EAAmBE,IACjCC,EAAOK,EAAcN,EACjBC,KAAQE,GAAGpB,EAAegB,EAAGC,EAAGG,EAAEF,IAGxC,GADAF,EAAEM,OAASP,EACPD,EAAcC,EAAmB,CACnC,IAAKE,EAAIM,EAAaN,EAAII,EAAMN,EAAmBE,IACjDC,EAAOD,EAAIF,EACXI,EAAKF,EAAIH,EACLI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAEhB,IAAKF,EAAII,EAAKJ,EAAII,EAAMN,EAAoBD,EAAaG,WAAYG,EAAEH,EAAI,QACtE,GAAIH,EAAcC,EACvB,IAAKE,EAAII,EAAMN,EAAmBE,EAAIM,EAAaN,IACjDC,EAAOD,EAAIF,EAAoB,EAC/BI,EAAKF,EAAIH,EAAc,EACnBI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAGlB,IAAKF,EAAI,EAAGA,EAAIH,EAAaG,IAC3BG,EAAEH,EAAIM,GAAeE,UAAUR,EAAI,GAGrC,OADAG,EAAEE,OAASD,EAAMN,EAAoBD,EAC9BE,M,sFChEJU,MAAM,wC,EACT,eAEM,OAFDA,MAAM,+CAA8C,0BAEzD,G,GACIA,MAAM,uB,EACR,eAAsD,MAAlDA,MAAM,+BAA8B,aAAS,G,GAQ1CA,MAAM,kB,GACHA,MAAM,Y,GAGZA,MAAM,qD,SA2BFA,MAAM,wC,SAGdA,MAAM,2NAYNC,KAAK,S,EAEL,eAwBI,UAvBF,eAsBC,OArBCC,MAAM,6BACNF,MAAM,oNAUNG,KAAK,OACLC,QAAQ,YACRC,OAAO,gB,CAEP,eAKE,QAJAC,iBAAe,QACfC,kBAAgB,QAChBC,eAAa,IACbC,EAAE,gK,eAEL,uB,MAGkBC,GAAG,eAAeV,MAAM,I,EAC7C,eAA4B,SAArBA,MAAM,cAAY,S,EACzB,eAAsD,UAA9CA,MAAM,uCAAqC,S,GAEhDA,MAAM,iE,GACJA,MAAM,2B,EACT,eAEC,SAFMA,MAAM,0BAA0BW,IAAI,eACxC,gBAAY,G,EAsBf,eAaM,OAZJT,MAAM,6BACNF,MAAM,6CACNG,KAAK,OACLC,QAAQ,YACRC,OAAO,gB,CAEP,eAKE,QAJAC,iBAAe,QACfC,kBAAgB,QAChBC,eAAa,IACbC,EAAE,kR,KASN,eAaM,OAZJP,MAAM,6BACNF,MAAM,6CACNG,KAAK,OACLC,QAAQ,YACRC,OAAO,gB,CAEP,eAKE,QAJAC,iBAAe,QACfC,kBAAgB,QAChBC,eAAa,IACbC,EAAE,2B,YAMRT,MAAM,mE,mBAQNA,MAAM,2B,GAEDA,MAAM,iB,GACFA,MAAM,0BAA0BW,IAAI,U,GAiBxCX,MAAM,iB,EACT,eAEC,SAFMA,MAAM,0BAA0BW,IAAI,YACxC,eAAW,G,SAkCbX,MAAM,2B,GACLA,MAAM,uB,EACR,eAAsD,MAAlDA,MAAM,+BAA8B,aAAS,G,GAQ1CA,MAAM,kB,GACHA,MAAM,Y,EAUV,eAaM,OAZJE,MAAM,6BACNF,MAAM,UACNG,KAAK,OACLC,QAAQ,YACRC,OAAO,gB,CAEP,eAKE,QAJAC,iBAAe,QACfC,kBAAgB,QAChBC,eAAa,IACbC,EAAE,mI,MAMRT,MAAM,sD,mBA2BRE,MAAM,6BACNF,MAAM,uBACNI,QAAQ,YACRD,KAAK,gB,EAEL,eAIE,QAHAS,YAAU,UACVH,EAAE,uSACFI,YAAU,W,wCAlSoC,EAAAC,gB,iBAAxD,eA2CM,MA3CN,EA2CM,CA1CJ,EAGA,eAuBK,KAvBL,EAuBK,CAtBH,G,mBACA,eAUK,2BARe,EAAAC,MAAI,SAAfC,G,wBAFT,eAUK,MATHhB,MAAM,gCAELiB,IAAKD,EAAQE,c,CAEd,eACC,2BADQF,EAAQG,QAAS,IAAC,GAC1B,eAAuC,2BAA9BH,EAAQI,cAAY,GAC9B,eAEM,MAFN,EAEM,CADJ,eAAgE,OAAhE,EAAgE,eAAtCJ,EAAQK,SAASC,QAAO,IAAM,IAAC,U,MAG7D,eASK,KATL,EASK,gBAPc,KAAK,M,IAAsB,OAAK,KAAG,SAAE,GAAF,OAAQ,EAAE,YAAU,QAAM,SAAE,EAAM,GAAR,OAAiB,EAAO,M,KAA+D,QAAO,IAM1K,KACJ,KAEF,eAcS,UAbN,QAAK,+BAAE,EAAAC,aACRvB,MAAM,wLAUP,+B,iBAIH,eA2PM,MA3PN,EA2PM,CAzPI,EAAAwB,WAAa,EAAAC,W,iBADrB,eAyCM,MAzCN,EAyCM,CAzBJ,K,qCA0BF,eAGM,MAHN,EAGM,CAFJ,EACA,G,cAFW,EAAAD,YAIb,eA4DM,MA5DN,EA4DM,CA3DJ,eAmBM,MAnBN,EAmBM,CAlBJ,EAGA,eAcE,SAbCzD,MAAO,EAAA2D,YACP,QAAK,8BAAE,EAAAC,cAAA,EAAAA,aAAA,qBACRC,KAAK,cACLC,YAAY,eACZ7B,MAAM,2NAQN8B,KAAK,Q,qBAGT,eAkBS,UAjBP9B,MAAM,+DACL,QAAK,+BAAE,EAAA+B,mB,CAER,IAgBM,EAAAP,WAAa,EAAAC,W,iBADrB,eAmBS,U,MAjBPzB,MAAM,2DACL,QAAK,+BAAE,EAAAgC,kB,CAER,K,wBAkBI,EAAAC,SAASf,eAAiB,EAAAgB,S,iBAFlC,eAKM,MALN,EAKM,eADD,EAAAD,SAASb,cAAY,I,sBAEf,EAAAe,a,iBAAX,eAAqD,QAA7B,4B,sBAEhB,EAAAF,SAASf,eAAiB,EAAAgB,S,iBADlC,eAyDM,MAzDN,EAyDM,CArDJ,eAiBM,MAjBN,EAiBM,CAhBJ,eAEU,QAFV,EAEU,eADR,EAAAD,SAASG,QAAO,0B,eAElB,eAYE,S,qDAXS,EAAAC,aAAY,IACrBrC,MAAM,2NAQN8B,KAAK,SACLF,KAAK,U,mBAVI,EAAAS,kBAab,eAiBM,MAjBN,EAiBM,CAhBJ,E,eAGA,eAYE,S,qDAXS,EAAAC,SAAQ,IACjBtC,MAAM,2NAQN8B,KAAK,SACLF,KAAK,Y,mBAVI,EAAAU,cAab,eAgBS,UAfN,QAAK,8BAAE,EAAAC,YAAA,EAAAA,WAAA,qBACPC,SAAU,EAAAH,cAAY,EACvBrC,MAAM,2OAWP,eAED,mB,sBAEyC,EAAAe,KAAKnB,OAAM,G,iBAAtD,eA6EM,MA7EN,EA6EM,CA5EJ,eAgDK,KAhDL,EAgDK,CA/CH,G,mBACA,eAkCK,2BAhCwB,EAAAmB,MAAI,SAAvBC,EAASyB,G,wBAFnB,eAkCK,MAjCHzC,MAAM,gCAELiB,IAAKD,EAAQE,c,CAEd,eACC,2BADQF,EAAQG,QAAS,IAAC,GAC1B,eAAuC,2BAA9BH,EAAQI,cAAY,GAC9B,eA0BM,MA1BN,EA0BM,CAzBJ,eAAgE,OAAhE,EAAgE,eAAtCJ,EAAQK,SAASC,QAAO,IAAM,IAAC,GACzD,eAuBS,UAtBN,QAAK,mBAAE,EAAAoB,cAAcD,IACtBzC,MAAM,kL,CAON,G,4BAiBN,eAUK,KAVL,EAUK,gBARgB,KAAK,MAA8H,IAAtG,OAAyB,KAAG,SAAE,GAAF,OAAQ,EAAE,YAA8B,QAAM,SAAE,EAAM,GAAR,OAAiB,EAAO,M,KAAkD,QAAO,IAOzM,KACJ,KAEF,eA0BS,UAzBNwC,SAAU,EAAAG,QACV,QAAK,+BAAE,EAAAC,cACR5C,MAAM,uK,CASO,EAAA2C,S,iBACb,eAYM,MAZN,EAYM,CALJ,M,iBARF,eAAuC,SAAjB,gB,iJClRf,iBAAgB,CAC7Bf,KAAM,UACNiB,MAF6B,WAG3B,IA8EIC,EA9EE/B,EAaF,eAAI,IACFW,EAAc,eAAI,IAClBW,EAAe,eAAI,GACnBC,EAAW,eAAI,GACfL,EAAW,eAAI,CACnBvB,GAAI,GACJQ,aAAc,GACdE,aAAc,GACdgB,SAAS,EACTW,UAAW,EACXC,WAAY,EACZ7B,OAAQ,EACR8B,KAAM,IAEFf,EAAU,gBAAI,GACdT,EAAY,gBAAI,GAChBU,EAAc,gBAAI,GAClBQ,EAAU,gBAAI,GACd7B,EAAiB,gBAAI,GACrBU,EAAW,gBAAI,GAEfO,EAAgB,WACpBP,EAASzD,OAAQ,EACjB,IAAOmF,KACL,CACEC,QAAQ,EACRC,UAAW,EACXC,aAAc,EACdC,QAAS,CAAEC,YAAY,EAAMC,UAAW,UACxCC,YAAa,CACX7B,KAAM,OACNE,KAAM,aACNhD,OAAQ4E,SAASC,eAAe,sBAAmBC,GAErDC,QAAS,CACPC,QAAS,CAAC,iBAId,SAAUC,GACR,GAAIA,EACF,MAAM,IAAIC,MAAMD,GAElB,IAAO7E,YAKP8C,EAAe,WACnBR,EAASzD,OAAQ,EACjB,IAAOkG,QAGT,IAAOC,aAAY,SAACC,GACdA,GAAQA,EAAKC,YAAcD,EAAKC,WAAWC,OAC7C5C,EAAU1D,OAAQ,MAItB,IAAOuG,YAAW,SAACH,GACjBzC,EAAY3D,MAAQoG,EAAKC,WAAWC,KAAOF,EAAKC,WAAWC,KAAO,GAClE7C,EAASzD,OAAQ,EACjB,IAAOkG,UAKT,IAAMtC,EAAe,SAAC4C,QACDX,IAAfd,GACF0B,aAAa1B,GAGfA,EAAa2B,YAAW,WACtB/C,EAAY3D,MAAQwG,EAAEzF,OAAOf,QAC5B,MAGL,eAAM2D,GAAa,SAAC2C,GAClBpC,EAASlE,MAAQ,CACf2C,GAAI,GACJQ,aAAc,GACdE,aAAc,GACdgB,SAAS,EACTW,UAAW,EACXC,WAAY,EACZ7B,OAAQ,EACR8B,KAAM,GAERd,EAAYpE,OAAQ,EACP,KAATsG,IACFnC,EAAQnE,OAAQ,EAChB,IAAI,OAAJ,UACK,OAAS2G,YADd,sCACuDL,IAEpDM,MACAC,UACAC,MAAK,SAACC,GACmB,IAApBA,EAAIX,KAAKvE,OACXuC,EAAYpE,OAAQ,GAEpBoE,EAAYpE,OAAQ,EAEpBkE,EAASlE,MAAQ+G,EAAIX,KAAK,OAG7BY,OAAM,SAAChB,GACN,MAAM,IAAIC,MAAMD,MAEjBiB,SAAQ,WACP9C,EAAQnE,OAAQ,SAKxB,IAAMwE,EAAa,WACjB,GAA0B,KAAtBN,EAASlE,MAAM2C,GAAW,CAE5B,IAAMW,EAAWY,EAASlE,MAAMqE,QAC3BH,EAASlE,MAAMgF,UAAYV,EAAatE,MAAS,IAClDkE,EAASlE,MAAMgF,UAAYV,EAAatE,MACtCkH,GAAsB,IAAM3C,EAASvE,OAAS,IACpDgD,EAAKhD,MAAMmH,KAAK,CACdxE,GAAIuB,EAASlE,MAAM2C,GACnBU,aAAca,EAASlE,MAAMqD,aAC7BF,aAAce,EAASlE,MAAMmD,aAC7BC,OAAQkB,EAAatE,MACrBoH,YAAalD,EAASlE,MAAMoD,OAC5B6B,WAAYf,EAASlE,MAAMiF,WAC3BZ,QAASH,EAASlE,MAAMqE,QACxBf,SAAUA,EAAW4D,EACrB3C,SAAUA,EAASvE,MACnBkF,KAAMhB,EAASlE,MAAMkF,OAEvBvB,EAAY3D,MAAQ,GACpBsE,EAAatE,MAAQ,EACrBuE,EAASvE,MAAQ,IAIf2E,EAAgB,SAACD,GACrB1B,EAAKhD,MAAMkB,OAAOwD,EAAO,IAGrBG,EAAY,WACZ7B,EAAKhD,MAAM6B,OAAS,IACtB+C,EAAQ5E,OAAQ,EAChBgD,EAAKhD,MAAMqH,QAAX,yDAAmB,WAAOpE,GAAP,kGACbqE,EAAe,EACfC,EAAYtE,EAAQmE,YAClBI,GAAkB,IAAMvE,EAAQiC,MAAQ,IAC1CjC,EAAQG,OAASH,EAAQgC,WAC3BsC,GAAatE,EAAQG,OAASH,EAAQgC,WAC7BhC,EAAQG,OAASH,EAAQgC,aAClCqC,GAAgBrE,EAAQG,QAPT,SASX,IAAI,OAAJ,UAAkB,OAASqE,YAA3B,YAA0CxE,EAAQN,KACrD+E,QACAC,KAAK,CACJ1C,WAAYqC,EACZlE,OAAQmE,IAETV,UACAG,OAAM,SAAChB,GACN,MAAM,IAAIC,MAAMD,MAjBH,uBAmBX,IAAI,OAAW,OAAS4B,oBAC3BC,OACAF,KAAK,CACJG,UAAW,IAAIC,KACf1E,aAAcJ,EAAQI,aACtBD,OAAQH,EAAQG,OAChBiB,QAASpB,EAAQoB,QACjBf,SAAUL,EAAQK,SAClBiB,SAAUtB,EAAQsB,SAClBW,KAAMjC,EAAQiC,KACd8C,cAAe/E,EAAQK,SAAWkE,IAEnCX,UACAG,OAAM,SAAChB,GACN,MAAM,IAAIC,MAAMD,MAjCH,2CAAnB,uDAoCApB,EAAQ5E,OAAQ,EAChB+C,EAAe/C,OAAQ,IAIrBwD,EAAW,WACfR,EAAKhD,MAAQ,GACb+C,EAAe/C,OAAQ,GAGzB,MAAO,CACLgE,gBACAC,eACAO,aACAG,gBACAL,eACAX,cACAO,WACAC,UACAV,WACAC,YACAU,cACAR,eACAZ,OACAuB,WACAM,YACAD,UACA7B,iBACAS,eCrON,EAAOyE,OAASA,EAED,gB,kCCJf,IAAI/H,EAAI,EAAQ,QACZf,EAAY,EAAQ,QACpB+I,EAAkB,EAAQ,QAC1BC,EAAS,EAAQ,QACjBC,EAAQ,EAAQ,QAEhBC,EAAgB,GAAI9E,QACpB+E,EAAQ3H,KAAK2H,MAEbC,EAAM,SAAUC,EAAG5I,EAAG6I,GACxB,OAAa,IAAN7I,EAAU6I,EAAM7I,EAAI,IAAM,EAAI2I,EAAIC,EAAG5I,EAAI,EAAG6I,EAAMD,GAAKD,EAAIC,EAAIA,EAAG5I,EAAI,EAAG6I,IAG9EC,EAAM,SAAUF,GAClB,IAAI5I,EAAI,EACJ+I,EAAKH,EACT,MAAOG,GAAM,KACX/I,GAAK,GACL+I,GAAM,KAER,MAAOA,GAAM,EACX/I,GAAK,EACL+I,GAAM,EACN,OAAO/I,GAGPgJ,EAAW,SAAUxC,EAAMxG,EAAGiJ,GAChC,IAAInE,GAAS,EACToE,EAAKD,EACT,QAASnE,EAAQ,EACfoE,GAAMlJ,EAAIwG,EAAK1B,GACf0B,EAAK1B,GAASoE,EAAK,IACnBA,EAAKR,EAAMQ,EAAK,MAIhBC,EAAS,SAAU3C,EAAMxG,GAC3B,IAAI8E,EAAQ,EACRmE,EAAI,EACR,QAASnE,GAAS,EAChBmE,GAAKzC,EAAK1B,GACV0B,EAAK1B,GAAS4D,EAAMO,EAAIjJ,GACxBiJ,EAAKA,EAAIjJ,EAAK,KAIdoJ,EAAe,SAAU5C,GAC3B,IAAI1B,EAAQ,EACRuE,EAAI,GACR,QAASvE,GAAS,EAChB,GAAU,KAANuE,GAAsB,IAAVvE,GAA+B,IAAhB0B,EAAK1B,GAAc,CAChD,IAAIwE,EAAIzJ,OAAO2G,EAAK1B,IACpBuE,EAAU,KAANA,EAAWC,EAAID,EAAId,EAAOgB,KAAK,IAAK,EAAID,EAAErH,QAAUqH,EAE1D,OAAOD,GAGPG,EAASf,IACY,UAAvB,KAAQ9E,QAAQ,IACG,MAAnB,GAAIA,QAAQ,IACS,SAArB,MAAMA,QAAQ,IACuB,yBAArC,mBAAsBA,QAAQ,MAC1B6E,GAAM,WAEVC,EAAcc,KAAK,OAKrBjJ,EAAE,CAAEa,OAAQ,SAAUC,OAAO,EAAMC,OAAQmI,GAAU,CACnD7F,QAAS,SAAiB8F,GACxB,IAKI7C,EAAG8C,EAAGC,EAAG/H,EALTgI,EAAStB,EAAgBxI,MACzB+J,EAActK,EAAUkK,GACxBjD,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACvBsD,EAAO,GACP/J,EAAS,IAGb,GAAI8J,EAAc,GAAKA,EAAc,GAAI,MAAM3J,WAAW,6BAE1D,GAAI0J,GAAUA,EAAQ,MAAO,MAC7B,GAAIA,IAAW,MAAQA,GAAU,KAAM,OAAO/J,OAAO+J,GAKrD,GAJIA,EAAS,IACXE,EAAO,IACPF,GAAUA,GAERA,EAAS,MAKX,GAJAhD,EAAIkC,EAAIc,EAASjB,EAAI,EAAG,GAAI,IAAM,GAClCe,EAAI9C,EAAI,EAAIgD,EAASjB,EAAI,GAAI/B,EAAG,GAAKgD,EAASjB,EAAI,EAAG/B,EAAG,GACxD8C,GAAK,iBACL9C,EAAI,GAAKA,EACLA,EAAI,EAAG,CACToC,EAASxC,EAAM,EAAGkD,GAClBC,EAAIE,EACJ,MAAOF,GAAK,EACVX,EAASxC,EAAM,IAAK,GACpBmD,GAAK,EAEPX,EAASxC,EAAMmC,EAAI,GAAIgB,EAAG,GAAI,GAC9BA,EAAI/C,EAAI,EACR,MAAO+C,GAAK,GACVR,EAAO3C,EAAM,GAAK,IAClBmD,GAAK,GAEPR,EAAO3C,EAAM,GAAKmD,GAClBX,EAASxC,EAAM,EAAG,GAClB2C,EAAO3C,EAAM,GACbzG,EAASqJ,EAAa5C,QAEtBwC,EAASxC,EAAM,EAAGkD,GAClBV,EAASxC,EAAM,IAAMI,EAAG,GACxB7G,EAASqJ,EAAa5C,GAAQ+B,EAAOgB,KAAK,IAAKM,GAUjD,OAPEA,EAAc,GAChBjI,EAAI7B,EAAOkC,OACXlC,EAAS+J,GAAQlI,GAAKiI,EAClB,KAAOtB,EAAOgB,KAAK,IAAKM,EAAcjI,GAAK7B,EAC3CA,EAAOgK,MAAM,EAAGnI,EAAIiI,GAAe,IAAM9J,EAAOgK,MAAMnI,EAAIiI,KAE9D9J,EAAS+J,EAAO/J,EACTA,M,kCCzHb,IAAIO,EAAI,EAAQ,QACZ0J,EAAO,EAAQ,QAAgCC,IAC/CrJ,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAKvDN,EAAE,CAAEa,OAAQ,QAASC,OAAO,EAAMC,QAASR,GAAuB,CAChEoJ,IAAK,SAAaC,GAChB,OAAOF,EAAKlK,KAAMoK,EAAY9H,UAAUH,OAAS,EAAIG,UAAU,QAAK6D","file":"js/chunk-4db42127.f369bc5a.js","sourcesContent":["'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","<template>\r\n  <div class=\"flex flex-col space-y-4 text-2xl p-5\" v-if=\"sellingSuccess\">\r\n    <div class=\"bg-green-100 rounded-xl text-rttext-500 p-3\">\r\n      Verkauf erfolgreich!\r\n    </div>\r\n    <ul class=\"bg-white rounded-xl\">\r\n      <li class=\"bg-green-900 p-3 text-white\">Warenkorb</li>\r\n      <li\r\n        class=\"flex justify-between p-1 pl-3\"\r\n        v-for=\"product in cart\"\r\n        :key=\"product.product_code\"\r\n      >\r\n        <span>{{ product.amount }}x</span\r\n        ><span>{{ product.product_name }}</span>\r\n        <div class=\"flex space-x-4\">\r\n          <span class=\"self-end\">{{ product.sold_for.toFixed(2) }}€</span>\r\n        </div>\r\n      </li>\r\n      <li class=\"flex justify-end pr-1 border-t-4 border-green-900\">\r\n        {{\r\n          (\r\n            Math.round(\r\n              cart.map((p) => p.sold_for).reduce((prev, curr) => prev + curr) *\r\n                100\r\n            ) / 100\r\n          ).toFixed(2)\r\n        }}€\r\n      </li>\r\n    </ul>\r\n    <button\r\n      @click=\"sellMore()\"\r\n      class=\"\r\n        rounded-xl\r\n        bg-green-500\r\n        hover:bg-green-600\r\n        text-white\r\n        py-1\r\n        px-2\r\n        w-1/2\r\n        self-center\r\n      \"\r\n    >\r\n      Neuen Verkauf starten\r\n    </button>\r\n  </div>\r\n  <div v-else class=\"flex flex-col space-y-8 text-2xl p-5\">\r\n    <div\r\n      v-if=\"quagging && !codeFound\"\r\n      class=\"\r\n        relative\r\n        py-3\r\n        pl-4\r\n        pr-10\r\n        leading-normal\r\n        text-yellow-700\r\n        bg-yellow-100\r\n        rounded-lg\r\n        mt-5\r\n        text-base\r\n      \"\r\n      role=\"alert\"\r\n    >\r\n      <p>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          class=\"\r\n            h-6\r\n            w-6\r\n            animate-ping\r\n            inline-flex\r\n            rounded-full\r\n            bg-green-500\r\n            opacity-90\r\n            mr-2\r\n          \"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          stroke=\"currentColor\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n          /></svg\r\n        >Suche Barcode...\r\n      </p>\r\n    </div>\r\n    <div v-show=\"quagging\" id=\"code-scanner\" class=\"\">\r\n      <video class=\"w-60 mb-10\" />\r\n      <canvas class=\"drawingBuffer absolute left-0 top-0\" />\r\n    </div>\r\n    <div class=\"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2\">\r\n      <div class=\"flex flex-col space-y-1\">\r\n        <label class=\"text-rttext-500 text-sm\" for=\"productCode\"\r\n          >Produkt-Code</label\r\n        >\r\n        <input\r\n          :value=\"productCode\"\r\n          @input=\"debounceCode\"\r\n          name=\"productCode\"\r\n          placeholder=\"Produkt-Code\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            text-rttext-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n          \"\r\n          type=\"text\"\r\n        />\r\n      </div>\r\n      <button\r\n        class=\"rounded bg-green-500 hover:bg-green-600 text-white py-1 px-2\"\r\n        @click=\"startScanning()\"\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          class=\"object-contain w-10 md:w-8 mx-auto md:mx-0\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          stroke=\"currentColor\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z\"\r\n          />\r\n        </svg>\r\n      </button>\r\n      <button\r\n        v-if=\"quagging && !codeFound\"\r\n        class=\"rounded bg-red-400 hover:bg-red-600 text-white py-2 px-3\"\r\n        @click=\"stopScanning()\"\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          class=\"object-contain w-10 md:w-8 mx-auto md:mx-0\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          stroke=\"currentColor\"\r\n        >\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M6 18L18 6M6 6l12 12\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <div\r\n      class=\"border border-rttext-500 rounded-xl bg-green-900 text-white p-2\"\r\n      v-if=\"itemInfo.product_code && !loading\"\r\n    >\r\n      {{ itemInfo.product_name }}\r\n    </div>\r\n    <div v-if=\"noItemFound\">Produkt nicht gefunden!</div>\r\n    <div\r\n      v-if=\"itemInfo.product_code && !loading\"\r\n      class=\"flex flex-col space-y-4\"\r\n    >\r\n      <div class=\"flex flex-col\">\r\n        <label class=\"text-rttext-500 text-sm\" for=\"amount\">{{\r\n          itemInfo.is_gram ? 'Menge in g' : 'Anzahl'\r\n        }}</label>\r\n        <input\r\n          v-model=\"amountToSell\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            text-rttext-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n          \"\r\n          type=\"number\"\r\n          name=\"amount\"\r\n        />\r\n      </div>\r\n      <div class=\"flex flex-col\">\r\n        <label class=\"text-rttext-500 text-sm\" for=\"discount\"\r\n          >Rabatt in %</label\r\n        >\r\n        <input\r\n          v-model=\"discount\"\r\n          class=\"\r\n            rounded-3xl\r\n            border border-gray-500\r\n            text-rttext-500\r\n            focus:outline-none focus:ring focus:ring-green-500\r\n            px-2\r\n            py-1\r\n          \"\r\n          type=\"number\"\r\n          name=\"discount\"\r\n        />\r\n      </div>\r\n      <button\r\n        @click=\"addProduct\"\r\n        :disabled=\"amountToSell <= 0\"\r\n        class=\"\r\n          rounded-xl\r\n          bg-green-500\r\n          hover:bg-green-600\r\n          text-white\r\n          py-1\r\n          px-2\r\n          w-1/2\r\n          self-center\r\n          disabled:opacity-50\r\n        \"\r\n      >\r\n        Hinzufügen\r\n      </button>\r\n    </div>\r\n    <div class=\"flex flex-col space-y-4\" v-if=\"cart.length > 0\">\r\n      <ul class=\"bg-white rounded-xl\">\r\n        <li class=\"bg-green-900 p-3 text-white\">Warenkorb</li>\r\n        <li\r\n          class=\"flex justify-between p-1 pl-3\"\r\n          v-for=\"(product, index) in cart\"\r\n          :key=\"product.product_code\"\r\n        >\r\n          <span>{{ product.amount }}x</span\r\n          ><span>{{ product.product_name }}</span>\r\n          <div class=\"flex space-x-4\">\r\n            <span class=\"self-end\">{{ product.sold_for.toFixed(2) }}€</span>\r\n            <button\r\n              @click=\"removeProduct(index)\"\r\n              class=\"\r\n                border border-red-600\r\n                text-red-600\r\n                hover:text-white hover:bg-red-600\r\n                rounded-xl\r\n              \"\r\n            >\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                class=\"h-6 w-6\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </li>\r\n        <li class=\"flex justify-end pr-11 border-t-4 border-green-900\">\r\n          {{\r\n            (\r\n              Math.round(\r\n                cart\r\n                  .map((p) => p.sold_for)\r\n                  .reduce((prev, curr) => prev + curr) * 100\r\n              ) / 100\r\n            ).toFixed(2)\r\n          }}€\r\n        </li>\r\n      </ul>\r\n      <button\r\n        :disabled=\"selling\"\r\n        @click=\"sellStuff()\"\r\n        class=\"\r\n          bg-green-500\r\n          hover:bg-green-700\r\n          rounded-xl\r\n          text-white text-3xl\r\n          px-2\r\n          py-1\r\n        \"\r\n      >\r\n        <span v-if=\"!selling\">Bestätigen</span>\r\n        <svg\r\n          v-else\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          class=\"h-5 w-5 animate-spin\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"currentColor\"\r\n        >\r\n          <path\r\n            fill-rule=\"evenodd\"\r\n            d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\"\r\n            clip-rule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n/* eslint-disable camelcase */\r\nimport { defineComponent, Ref, ref, watch } from 'vue';\r\nimport Quagga from '@ericblade/quagga2';\r\nimport { ApiRequest, API_URLS } from '@/api/request.api';\r\n\r\nexport default defineComponent({\r\n  name: 'Verkauf',\r\n  setup() {\r\n    const cart: Ref<\r\n      Array<{\r\n        id: string;\r\n        product_name: string;\r\n        product_code: string;\r\n        amount: number;\r\n        old_amount: number;\r\n        item_amount: number;\r\n        sold_for: number;\r\n        is_gram: boolean;\r\n        discount: number;\r\n        mwst: number;\r\n      }>\r\n    > = ref([]);\r\n    const productCode = ref('');\r\n    const amountToSell = ref(0);\r\n    const discount = ref(0);\r\n    const itemInfo = ref({\r\n      id: '',\r\n      product_code: '',\r\n      product_name: '',\r\n      is_gram: false,\r\n      price_tag: 0,\r\n      old_amount: 0,\r\n      amount: 0,\r\n      mwst: 0,\r\n    });\r\n    const loading = ref(true);\r\n    const codeFound = ref(false);\r\n    const noItemFound = ref(false);\r\n    const selling = ref(false);\r\n    const sellingSuccess = ref(false);\r\n    const quagging = ref(false);\r\n\r\n    const startScanning = () => {\r\n      quagging.value = true;\r\n      Quagga.init(\r\n        {\r\n          locate: true,\r\n          frequency: 5,\r\n          numOfWorkers: 2,\r\n          locator: { halfSample: true, patchSize: 'medium' },\r\n          inputStream: {\r\n            name: 'Live',\r\n            type: 'LiveStream',\r\n            target: document.getElementById('code-scanner') || undefined,\r\n          },\r\n          decoder: {\r\n            readers: ['ean_reader'],\r\n          },\r\n        },\r\n        // eslint-disable-next-line func-names\r\n        function (err) {\r\n          if (err) {\r\n            throw new Error(err);\r\n          }\r\n          Quagga.start();\r\n        }\r\n      );\r\n    };\r\n\r\n    const stopScanning = () => {\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    };\r\n\r\n    Quagga.onProcessed((data) => {\r\n      if (data && data.codeResult && data.codeResult.code) {\r\n        codeFound.value = true;\r\n      }\r\n    });\r\n\r\n    Quagga.onDetected((data) => {\r\n      productCode.value = data.codeResult.code ? data.codeResult.code : '';\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    });\r\n\r\n    let timeoutRef: number | undefined;\r\n\r\n    const debounceCode = (e: any) => {\r\n      if (timeoutRef !== undefined) {\r\n        clearTimeout(timeoutRef);\r\n      }\r\n\r\n      timeoutRef = setTimeout(() => {\r\n        productCode.value = e.target.value;\r\n      }, 500);\r\n    };\r\n\r\n    watch(productCode, (code) => {\r\n      itemInfo.value = {\r\n        id: '',\r\n        product_code: '',\r\n        product_name: '',\r\n        is_gram: false,\r\n        price_tag: 0,\r\n        old_amount: 0,\r\n        amount: 0,\r\n        mwst: 0,\r\n      };\r\n      noItemFound.value = false;\r\n      if (code !== '') {\r\n        loading.value = true;\r\n        new ApiRequest(\r\n          `${API_URLS.SEARCH_ITEM}?filter[product_code][_eq]=${code}`\r\n        )\r\n          .get()\r\n          .execute()\r\n          .then((req) => {\r\n            if (req.data.length === 0) {\r\n              noItemFound.value = true;\r\n            } else {\r\n              noItemFound.value = false;\r\n              // eslint-disable-next-line prefer-destructuring\r\n              itemInfo.value = req.data[0];\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            throw new Error(err);\r\n          })\r\n          .finally(() => {\r\n            loading.value = false;\r\n          });\r\n      }\r\n    });\r\n\r\n    const addProduct = () => {\r\n      if (itemInfo.value.id !== '') {\r\n        // eslint-disable-next-line camelcase\r\n        const sold_for = itemInfo.value.is_gram\r\n          ? (itemInfo.value.price_tag * amountToSell.value) / 100\r\n          : itemInfo.value.price_tag * amountToSell.value;\r\n        const discountMultiplier = (100 - discount.value) / 100;\r\n        cart.value.push({\r\n          id: itemInfo.value.id,\r\n          product_name: itemInfo.value.product_name,\r\n          product_code: itemInfo.value.product_code,\r\n          amount: amountToSell.value,\r\n          item_amount: itemInfo.value.amount,\r\n          old_amount: itemInfo.value.old_amount,\r\n          is_gram: itemInfo.value.is_gram,\r\n          sold_for: sold_for * discountMultiplier,\r\n          discount: discount.value,\r\n          mwst: itemInfo.value.mwst,\r\n        });\r\n        productCode.value = '';\r\n        amountToSell.value = 0;\r\n        discount.value = 0;\r\n      }\r\n    };\r\n\r\n    const removeProduct = (index: number) => {\r\n      cart.value.splice(index, 1);\r\n    };\r\n\r\n    const sellStuff = () => {\r\n      if (cart.value.length > 0) {\r\n        selling.value = true;\r\n        cart.value.forEach(async (product) => {\r\n          let newOldAmount = 0;\r\n          let newAmount = product.item_amount;\r\n          const mwstMultiplier = (100 + product.mwst) / 100;\r\n          if (product.amount > product.old_amount) {\r\n            newAmount -= product.amount - product.old_amount;\r\n          } else if (product.amount < product.old_amount) {\r\n            newOldAmount -= product.amount;\r\n          }\r\n          await new ApiRequest(`${API_URLS.UPDATE_ITEM}/${product.id}`)\r\n            .patch()\r\n            .body({\r\n              old_amount: newOldAmount,\r\n              amount: newAmount,\r\n            })\r\n            .execute()\r\n            .catch((err) => {\r\n              throw new Error(err);\r\n            });\r\n          await new ApiRequest(API_URLS.ADD_NEW_SOLD_ENTRY)\r\n            .post()\r\n            .body({\r\n              sale_date: new Date(),\r\n              product_name: product.product_name,\r\n              amount: product.amount,\r\n              is_gram: product.is_gram,\r\n              sold_for: product.sold_for,\r\n              discount: product.discount,\r\n              mwst: product.mwst,\r\n              sold_for_mwst: product.sold_for * mwstMultiplier,\r\n            })\r\n            .execute()\r\n            .catch((err) => {\r\n              throw new Error(err);\r\n            });\r\n        });\r\n        selling.value = false;\r\n        sellingSuccess.value = true;\r\n      }\r\n    };\r\n\r\n    const sellMore = () => {\r\n      cart.value = [];\r\n      sellingSuccess.value = false;\r\n    };\r\n\r\n    return {\r\n      startScanning,\r\n      stopScanning,\r\n      addProduct,\r\n      removeProduct,\r\n      amountToSell,\r\n      productCode,\r\n      itemInfo,\r\n      loading,\r\n      quagging,\r\n      codeFound,\r\n      noItemFound,\r\n      debounceCode,\r\n      cart,\r\n      discount,\r\n      sellStuff,\r\n      selling,\r\n      sellingSuccess,\r\n      sellMore,\r\n    };\r\n  },\r\n});\r\n</script>\r\n","\r\n/* eslint-disable camelcase */\r\nimport { defineComponent, Ref, ref, watch } from 'vue';\r\nimport Quagga from '@ericblade/quagga2';\r\nimport { ApiRequest, API_URLS } from '@/api/request.api';\r\n\r\nexport default defineComponent({\r\n  name: 'Verkauf',\r\n  setup() {\r\n    const cart: Ref<\r\n      Array<{\r\n        id: string;\r\n        product_name: string;\r\n        product_code: string;\r\n        amount: number;\r\n        old_amount: number;\r\n        item_amount: number;\r\n        sold_for: number;\r\n        is_gram: boolean;\r\n        discount: number;\r\n        mwst: number;\r\n      }>\r\n    > = ref([]);\r\n    const productCode = ref('');\r\n    const amountToSell = ref(0);\r\n    const discount = ref(0);\r\n    const itemInfo = ref({\r\n      id: '',\r\n      product_code: '',\r\n      product_name: '',\r\n      is_gram: false,\r\n      price_tag: 0,\r\n      old_amount: 0,\r\n      amount: 0,\r\n      mwst: 0,\r\n    });\r\n    const loading = ref(true);\r\n    const codeFound = ref(false);\r\n    const noItemFound = ref(false);\r\n    const selling = ref(false);\r\n    const sellingSuccess = ref(false);\r\n    const quagging = ref(false);\r\n\r\n    const startScanning = () => {\r\n      quagging.value = true;\r\n      Quagga.init(\r\n        {\r\n          locate: true,\r\n          frequency: 5,\r\n          numOfWorkers: 2,\r\n          locator: { halfSample: true, patchSize: 'medium' },\r\n          inputStream: {\r\n            name: 'Live',\r\n            type: 'LiveStream',\r\n            target: document.getElementById('code-scanner') || undefined,\r\n          },\r\n          decoder: {\r\n            readers: ['ean_reader'],\r\n          },\r\n        },\r\n        // eslint-disable-next-line func-names\r\n        function (err) {\r\n          if (err) {\r\n            throw new Error(err);\r\n          }\r\n          Quagga.start();\r\n        }\r\n      );\r\n    };\r\n\r\n    const stopScanning = () => {\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    };\r\n\r\n    Quagga.onProcessed((data) => {\r\n      if (data && data.codeResult && data.codeResult.code) {\r\n        codeFound.value = true;\r\n      }\r\n    });\r\n\r\n    Quagga.onDetected((data) => {\r\n      productCode.value = data.codeResult.code ? data.codeResult.code : '';\r\n      quagging.value = false;\r\n      Quagga.stop();\r\n    });\r\n\r\n    let timeoutRef: number | undefined;\r\n\r\n    const debounceCode = (e: any) => {\r\n      if (timeoutRef !== undefined) {\r\n        clearTimeout(timeoutRef);\r\n      }\r\n\r\n      timeoutRef = setTimeout(() => {\r\n        productCode.value = e.target.value;\r\n      }, 500);\r\n    };\r\n\r\n    watch(productCode, (code) => {\r\n      itemInfo.value = {\r\n        id: '',\r\n        product_code: '',\r\n        product_name: '',\r\n        is_gram: false,\r\n        price_tag: 0,\r\n        old_amount: 0,\r\n        amount: 0,\r\n        mwst: 0,\r\n      };\r\n      noItemFound.value = false;\r\n      if (code !== '') {\r\n        loading.value = true;\r\n        new ApiRequest(\r\n          `${API_URLS.SEARCH_ITEM}?filter[product_code][_eq]=${code}`\r\n        )\r\n          .get()\r\n          .execute()\r\n          .then((req) => {\r\n            if (req.data.length === 0) {\r\n              noItemFound.value = true;\r\n            } else {\r\n              noItemFound.value = false;\r\n              // eslint-disable-next-line prefer-destructuring\r\n              itemInfo.value = req.data[0];\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            throw new Error(err);\r\n          })\r\n          .finally(() => {\r\n            loading.value = false;\r\n          });\r\n      }\r\n    });\r\n\r\n    const addProduct = () => {\r\n      if (itemInfo.value.id !== '') {\r\n        // eslint-disable-next-line camelcase\r\n        const sold_for = itemInfo.value.is_gram\r\n          ? (itemInfo.value.price_tag * amountToSell.value) / 100\r\n          : itemInfo.value.price_tag * amountToSell.value;\r\n        const discountMultiplier = (100 - discount.value) / 100;\r\n        cart.value.push({\r\n          id: itemInfo.value.id,\r\n          product_name: itemInfo.value.product_name,\r\n          product_code: itemInfo.value.product_code,\r\n          amount: amountToSell.value,\r\n          item_amount: itemInfo.value.amount,\r\n          old_amount: itemInfo.value.old_amount,\r\n          is_gram: itemInfo.value.is_gram,\r\n          sold_for: sold_for * discountMultiplier,\r\n          discount: discount.value,\r\n          mwst: itemInfo.value.mwst,\r\n        });\r\n        productCode.value = '';\r\n        amountToSell.value = 0;\r\n        discount.value = 0;\r\n      }\r\n    };\r\n\r\n    const removeProduct = (index: number) => {\r\n      cart.value.splice(index, 1);\r\n    };\r\n\r\n    const sellStuff = () => {\r\n      if (cart.value.length > 0) {\r\n        selling.value = true;\r\n        cart.value.forEach(async (product) => {\r\n          let newOldAmount = 0;\r\n          let newAmount = product.item_amount;\r\n          const mwstMultiplier = (100 + product.mwst) / 100;\r\n          if (product.amount > product.old_amount) {\r\n            newAmount -= product.amount - product.old_amount;\r\n          } else if (product.amount < product.old_amount) {\r\n            newOldAmount -= product.amount;\r\n          }\r\n          await new ApiRequest(`${API_URLS.UPDATE_ITEM}/${product.id}`)\r\n            .patch()\r\n            .body({\r\n              old_amount: newOldAmount,\r\n              amount: newAmount,\r\n            })\r\n            .execute()\r\n            .catch((err) => {\r\n              throw new Error(err);\r\n            });\r\n          await new ApiRequest(API_URLS.ADD_NEW_SOLD_ENTRY)\r\n            .post()\r\n            .body({\r\n              sale_date: new Date(),\r\n              product_name: product.product_name,\r\n              amount: product.amount,\r\n              is_gram: product.is_gram,\r\n              sold_for: product.sold_for,\r\n              discount: product.discount,\r\n              mwst: product.mwst,\r\n              sold_for_mwst: product.sold_for * mwstMultiplier,\r\n            })\r\n            .execute()\r\n            .catch((err) => {\r\n              throw new Error(err);\r\n            });\r\n        });\r\n        selling.value = false;\r\n        sellingSuccess.value = true;\r\n      }\r\n    };\r\n\r\n    const sellMore = () => {\r\n      cart.value = [];\r\n      sellingSuccess.value = false;\r\n    };\r\n\r\n    return {\r\n      startScanning,\r\n      stopScanning,\r\n      addProduct,\r\n      removeProduct,\r\n      amountToSell,\r\n      productCode,\r\n      itemInfo,\r\n      loading,\r\n      quagging,\r\n      codeFound,\r\n      noItemFound,\r\n      debounceCode,\r\n      cart,\r\n      discount,\r\n      sellStuff,\r\n      selling,\r\n      sellingSuccess,\r\n      sellMore,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./Verkauf.vue?vue&type=template&id=38de2f72\"\nimport script from \"./Verkauf.vue?vue&type=script&lang=ts\"\nexport * from \"./Verkauf.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}